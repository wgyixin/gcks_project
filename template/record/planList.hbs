<div class="padding-zero container-fluid">
<div class="row-fluid span12 " style="padding-top:20px;">
<div class="box">

<div class="input-inline" style="padding-top:18px;" data-original-title>
{{#if planOperateRule}}
&nbsp;&nbsp;
<a  class="btn btn-success" {{action "beforeAddOrEdit" "add"}} ><i class="icon-plus icon-white"></i> 新增</a>

{{/if}}
<div class="modal hide corn-modal" id="add_edit"  data-backdrop="static">
<div class="modal-header">
    <a href="#" class="close" data-dismiss="modal" >×</a>
    <h4>{{title}}录制策略</h4>
</div>

<div class="corn-modal-body" >
<form style="position: relative;">
<div class="control-group">
    <label class="control-label help-inline ipcLabel" >计划名<i style="color:red">*</i></label>
    <div class="controls help-inline" >
        <!--{{input type="text" value=plan_name  id="plan_name"}}-->
        {{view App.ValidataionTextField id="plan_name_view" valueBinding="plan_name"}}
    </div>

    <label class="control-label help-inline ipcLabel" >时长(/分钟)<i style="color:red">*</i></label>
    <div class="controls help-inline" >
        <!--{{input type="text" value= plan_timeLength }}-->
        {{view App.ValidataionTextField id="plan_timeLength_view" valueBinding="plan_timeLength" placeholder="空或-1为循环录制"}}
    </div>

</div>


<div class="control-group">

<div class="tabbable " style="height:200px; border: 1px rgb(202, 196, 196) solid; border-radius: 5px;">
<label class="control-label help-inline" >制定计划规则<i style="color:red">*</i></label>
<div style="padding-left: 10px;">
<ul class="nav nav-tabs">
    <li class="active"><a href="#minute_tab" data-toggle="tab">分钟</a></li>
    <li><a href="#hour_tab" data-toggle="tab">小时</a> </li>
    <li><a href="#day_tab" data-toggle="tab">日</a> </li>
    <li><a href="#month_tab" data-toggle="tab">月</a> </li>
    <li><a href="#week_tab" data-toggle="tab">周</a> </li>
    <!--<li style="display: none;"><a href="#year_tab" data-toggle="tab">年</a> </li>-->
</ul>
<div class="tab-content plan">
<div class="tab-pane active" id="minute_tab">
    <div title="分钟">
        <!--<div class="line" style="display: none;">-->
        <!--<input type="radio"  name="min" onclick="everyTime(this)">-->
        <!--分钟 允许的通配符[, - * /]</div>-->
        <!--<div class="line" style="display: none;">-->
        <!--<input type="radio" name="min" onclick="cycle(this)">-->
        <!--周期从-->
        <!--<input class="numberspinner" style="width: 60px;" data-options="min:1,max:58" value="1"-->
        <!--id="minStart_0">-->
        <!----->
        <!--<input class="numberspinner" style="width: 60px;" data-options="min:2,max:59" value="2"-->
        <!--id="minEnd_0">-->
        <!--分钟</div>-->
        <!--<div class="line" style="display: none;">-->
        <!--<input type="radio" name="min" onclick="startOn(this)">-->
        <!--从-->
        <!--<input class="numberspinner" style="width: 60px;" data-options="min:0,max:59" value="0"-->
        <!--id="minStart_1">-->
        <!--分钟开始,每-->
        <!--<input class="numberspinner" style="width: 60px;" data-options="min:1,max:59" value="1"-->
        <!--id="minEnd_1">-->
        <!--分钟执行一次</div>-->
        <div class="line">
            <input type="radio" name="min" id="min_appoint" checked="checked">
            指定</div>
        <div class="imp minList">
            <input type="checkbox" value="15">15
            <input type="checkbox" value="30">30
            <input type="checkbox" value="45">45
        </div>
        <!--<div class="imp minList" style="display: none;">-->
        <!--<input type="checkbox" value="1">01-->
        <!--<input type="checkbox" value="2">02-->
        <!--<input type="checkbox" value="3">03-->
        <!--<input type="checkbox" value="4">04-->
        <!--<input type="checkbox" value="5">05-->
        <!--<input type="checkbox" value="6">06-->
        <!--<input type="checkbox" value="7">07-->
        <!--<input type="checkbox" value="8">08-->
        <!--<input type="checkbox" value="9">09-->
        <!--<input type="checkbox" value="10">10</div>-->
        <!--<div class="imp minList">-->
        <!--<div style="display: none;">-->
        <!--<input type="checkbox" value="11">11-->
        <!--<input type="checkbox" value="12">12-->
        <!--<input type="checkbox" value="13">13-->
        <!--<input type="checkbox" value="14">14-->
        <!--</div>-->
        <!--<input type="checkbox" value="15">15-->
        <!--<div style="display: none;">-->
        <!--<input type="checkbox" value="16">16-->
        <!--<input type="checkbox" value="17">17-->
        <!--<input type="checkbox" value="18">18-->
        <!--<input type="checkbox" value="19">19-->
        <!--<input type="checkbox" value="20">20-->
        <!--</div>-->
        <!--</div>-->
        <!--<div class="imp minList">-->
        <!--<div style="display: none;">-->
        <!--<input type="checkbox" value="21">21-->
        <!--<input type="checkbox" value="22">22-->
        <!--<input type="checkbox" value="23">23-->
        <!--<input type="checkbox" value="24">24-->
        <!--<input type="checkbox" value="25">25-->
        <!--<input type="checkbox" value="26">26-->
        <!--<input type="checkbox" value="27">27-->
        <!--<input type="checkbox" value="28">28-->
        <!--<input type="checkbox" value="29">29-->
        <!--</div>-->
        <!--<input type="checkbox" value="30">30</div>-->
        <!--<div class="imp minList">-->
        <!--<div style="display: none;">-->
        <!--<input type="checkbox" value="31">31-->
        <!--<input type="checkbox" value="32">32-->
        <!--<input type="checkbox" value="33">33-->
        <!--<input type="checkbox" value="34">34-->
        <!--<input type="checkbox" value="35">35-->
        <!--<input type="checkbox" value="36">36-->
        <!--<input type="checkbox" value="37">37-->
        <!--<input type="checkbox" value="38">38-->
        <!--<input type="checkbox" value="39">39-->
        <!--<input type="checkbox" value="40">40</div>-->
        <!--<div class="imp minList">-->
        <!--<input type="checkbox" value="41">41-->
        <!--<input type="checkbox" value="42">42-->
        <!--<input type="checkbox" value="43">43-->
        <!--<input type="checkbox" value="44">44-->
        <!--<input type="checkbox" value="45">45-->
        <!--<input type="checkbox" value="46">46-->
        <!--<input type="checkbox" value="47">47-->
        <!--<input type="checkbox" value="48">48-->
        <!--<input type="checkbox" value="49">49-->
        <!--<input type="checkbox" value="50">50</div>-->
        <!--<div class="imp minList">-->
        <!--<input type="checkbox" value="51">51-->
        <!--<input type="checkbox" value="52">52-->
        <!--<input type="checkbox" value="53">53-->
        <!--<input type="checkbox" value="54">54-->
        <!--<input type="checkbox" value="55">55-->
        <!--<input type="checkbox" value="56">56-->
        <!--<input type="checkbox" value="57">57-->
        <!--<input type="checkbox" value="58">58-->
        <!--<input type="checkbox" value="59">59-->
        <!--</div>-->
    </div>
</div>
<div class="tab-pane" id="hour_tab">
    <div title="小时">
        <!--<div class="line" style="display: none;">-->
        <!--<input type="radio" checked="checked" name="hour" onclick="everyTime(this)">-->
        <!--小时 允许的通配符[, - * /]</div>-->
        <!--<div class="line" style="display: none;">-->
        <!--<input type="radio" name="hour" onclick="cycle(this)">-->
        <!--周期从-->
        <!--<input class="numberspinner" style="width: 60px;" data-options="min:0,max:23" value="0"-->
        <!--id="hourStart_0">-->
        <!----->
        <!--<input class="numberspinner" style="width: 60px;" data-options="min:2,max:23" value="2"-->
        <!--id="hourEnd_1">-->
        <!--小时</div>-->
        <!--<div class="line" style="display: none;">-->
        <!--<input type="radio" name="hour" onclick="startOn(this)">-->
        <!--从-->
        <!--<input class="numberspinner" style="width: 60px;" data-options="min:0,max:23" value="0"-->
        <!--id="hourStart_1">-->
        <!--小时开始,每-->
        <!--<input class="numberspinner" style="width: 60px;" data-options="min:1,max:23" value="1"-->
        <!--id="hourEnd_1">-->
        <!--小时执行一次</div>-->
        <div class="line">
            <input type="radio" name="hour" id="hour_appoint" checked="checked">
            指定</div>
        <div class="imp hourList">
            AM:
            <input type="checkbox" value="0">00
            <input type="checkbox" value="1">01
            <input type="checkbox" value="2">02
            <input type="checkbox" value="3">03
            <input type="checkbox" value="4">04
            <input type="checkbox" value="5">05
            <input type="checkbox" value="6">06
            <input type="checkbox" value="7">07
            <input type="checkbox" value="8">08
            <input type="checkbox" value="9">09
            <input type="checkbox" value="10">10
            <input type="checkbox" value="11">11
        </div>
        <div class="imp hourList">
            PM:
            <input type="checkbox" value="12">12
            <input type="checkbox" value="13">13
            <input type="checkbox" value="14">14
            <input type="checkbox" value="15">15
            <input type="checkbox" value="16">16
            <input type="checkbox" value="17">17
            <input type="checkbox" value="18">18
            <input type="checkbox" value="19">19
            <input type="checkbox" value="20">20
            <input type="checkbox" value="21">21
            <input type="checkbox" value="22">22
            <input type="checkbox" value="23">23
        </div>
    </div>
</div>
<div class="tab-pane" id="day_tab">
    <div title="日">
        <div class="line">
            <input type="radio" checked="checked" name="day" onclick="everyTime(this)">
            日 允许的通配符[, - * / L W]</div>

        <div class="line" style="display: none;">
            <input type="radio" name="day" onclick="unAppoint(this)">
            不指定</div>
        <div class="line" style="display: none;">
            <input type="radio" name="day" onclick="cycle(this)">
            周期从
            <input class="numberspinner" style="width: 60px;" data-options="min:1,max:31" value="1"
                   id="dayStart_0">
            -
            <input class="numberspinner" style="width: 60px;" data-options="min:2,max:31" value="2"
                   id="dayEnd_0">
            日</div>
        <div class="line" style="display: none;">
            <input type="radio" name="day" onclick="startOn(this)">
            从
            <input class="numberspinner" style="width: 60px;" data-options="min:1,max:31" value="1"
                   id="dayStart_1">
            日开始,每
            <input class="numberspinner" style="width: 60px;" data-options="min:1,max:31" value="1"
                   id="dayEnd_1">
            天执行一次</div>
        <div class="line" style="display: none;">
            <input type="radio" name="day" onclick="workDay(this)">
            每月
            <input class="numberspinner" style="width: 60px;" data-options="min:1,max:31" value="1"
                   id="dayStart_2">
            号最近的那个工作日</div>
        <div class="line" style="display: none;">
            <input type="radio" name="day" onclick="lastDay(this)">
            本月最后一天</div>


        <div class="line">
            <input type="radio" name="day" id="day_appoint">
            指定</div>
        <div class="imp dayList">
            <input type="checkbox" value="1">1
            <input type="checkbox" value="2">2
            <input type="checkbox" value="3">3
            <input type="checkbox" value="4">4
            <input type="checkbox" value="5">5
            <input type="checkbox" value="6">6
            <input type="checkbox" value="7">7
            <input type="checkbox" value="8">8
            <input type="checkbox" value="9">9
            <input type="checkbox" value="10">10
            <input type="checkbox" value="11">11
            <input type="checkbox" value="12">12
            <input type="checkbox" value="13">13
            <input type="checkbox" value="14">14
            <input type="checkbox" value="15">15
            <input type="checkbox" value="16">16
        </div>
        <div class="imp dayList">
            <input type="checkbox" value="17">17
            <input type="checkbox" value="18">18
            <input type="checkbox" value="19">19
            <input type="checkbox" value="20">20
            <input type="checkbox" value="21">21
            <input type="checkbox" value="22">22
            <input type="checkbox" value="23">23
            <input type="checkbox" value="24">24
            <input type="checkbox" value="25">25
            <input type="checkbox" value="26">26
            <input type="checkbox" value="27">27
            <input type="checkbox" value="28">28
            <input type="checkbox" value="29">29
            <input type="checkbox" value="30">30
            <input type="checkbox" value="31">31
        </div>
    </div>
</div>
<div class="tab-pane" id="month_tab">
    <div title="月">
        <div class="line">
            <input type="radio" checked="checked" name="mouth" onclick="everyTime(this)">
            月 允许的通配符[, - * /]</div>
        <div class="line" style="display: none;">
            <input type="radio" name="mouth" onclick="unAppoint(this)">
            不指定</div>
        <div class="line" style="display: none;">
            <input type="radio" name="mouth" onclick="cycle(this)">
            周期从
            <input class="numberspinner" style="width: 60px;" data-options="min:1,max:12" value="1"
                   id="mouthStart_0">
            -
            <input class="numberspinner" style="width: 60px;" data-options="min:2,max:12" value="2"
                   id="mouthEnd_0">
            月</div>
        <div class="line" style="display: none;">
            <input type="radio" name="mouth" onclick="startOn(this)">
            从
            <input class="numberspinner" style="width: 60px;" data-options="min:1,max:12" value="1"
                   id="mouthStart_1">
            日开始,每
            <input class="numberspinner" style="width: 60px;" data-options="min:1,max:12" value="1"
                   id="mouthEnd_1">
            月执行一次</div>
        <div class="line">
            <input type="radio" name="mouth" id="mouth_appoint">
            指定</div>
        <div class="imp mouthList">
            <input type="checkbox" value="1">1
            <input type="checkbox" value="2">2
            <input type="checkbox" value="3">3
            <input type="checkbox" value="4">4
            <input type="checkbox" value="5">5
            <input type="checkbox" value="6">6
            <input type="checkbox" value="7">7
            <input type="checkbox" value="8">8
            <input type="checkbox" value="9">9
            <input type="checkbox" value="10">10
            <input type="checkbox" value="11">11
            <input type="checkbox" value="12">12
        </div>
    </div>
</div>
<div class="tab-pane" id="week_tab">
    <div title="周">
        <div class="line" style="display: none;">
            <input type="radio"   name="week" onclick="everyTime(this)">
            周 允许的通配符[, - * / L #]
        </div>
        <div class="line" >
            <input type="radio" checked="checked" name="week" onclick="unAppoint(this)">
            不指定</div>
        <div class="line" style="display: none;">
            <input type="radio" name="week" onclick="startOn(this)">
            周期 从星期<input class="numberspinner" style="width: 60px;" data-options="min:1,max:7"
                         id="weekStart_0" value="1">
            -
            <input class="numberspinner" style="width: 60px;" data-options="min:2,max:7" value="2"
                   id="weekEnd_0"></div>
        <div class="line" style="display: none;">
            <input type="radio" name="week" onclick="weekOfDay(this)">
            第<input class="numberspinner" style="width: 60px;" data-options="min:1,max:4" value="1"
                    id="weekStart_1">
            周 的星期<input class="numberspinner" style="width: 60px;" data-options="min:1,max:7"
                        id="weekEnd_1" value="1"></div>
        <div class="line" style="display: none;">
            <input type="radio" name="week" onclick="lastWeek(this)">
            本月最后一个星期<input class="numberspinner" style="width: 60px;" data-options="min:1,max:7"
                           id="weekStart_2" value="1"></div>
        <div class="line">
            <input type="radio" name="week" id="week_appoint" >
            指定
        </div>
        <div class="imp weekList">
            <input type="checkbox" value="1">1
            <input type="checkbox" value="2">2
            <input type="checkbox" value="3">3
            <input type="checkbox" value="4">4
            <input type="checkbox" value="5">5
            <input type="checkbox" value="6">6
            <input type="checkbox" value="7">7
        </div>
    </div>
</div>
<div class="tab-pane" id="year_tab" style="display: none;">
    <div title="年">
        <div class="line">
            <input type="radio" checked="checked" name="year" onclick="unAppoint(this)">
            不指定 允许的通配符[, - * /] 非必填</div>
        <div class="line">
            <input type="radio" name="year" onclick="everyTime(this)">
            每年</div>
        <div class="line" style="display: none;">
            <input type="radio" name="year" onclick="cycle(this)">周期 从
            <input class="numberspinner" style="width: 90px;" data-options="min:2013,max:3000"
                   id="yearStart_0" value="2013">
            -
            <input class="numberspinner" style="width: 90px;" data-options="min:2014,max:3000"
                   id="yearEnd_0" value="2014"></div>
    </div>
</div>
</div>
</div>

</div>
</div>



<div  style="height:100px; border: 1px rgb(202, 196, 196) solid; border-radius: 5px;" class="control-group">
    <label class="control-label help-inline" >规则结果表达式</label>
    <table >
        <tbody>
        <tr>
            <td>
            </td>
            <!--<td align="center">-->
            <!--秒-->
            <!--</td>-->
            <td align="center">
                分钟
            </td>
            <td align="center">
                小时
            </td>
            <td align="center">
                日
            </td>
            <td align="center">
                月<br />
            </td>
            <td align="center">
                星期
            </td>
            <td align="center" style="display: none;">
                年
            </td>
        </tr>
        <tr>
            <td class="help-inline" style="font-size: 14px;">
                表达式字段:
            </td>
            <!--<td>-->
            <!--<input type="text" name="v_second" class="col" value="*" readonly="readonly" />-->
            <!--</td>-->
            <td>
                <input type="text" name="v_min" class="col" value="*" readonly="readonly" />
            </td>
            <td>
                <input type="text" name="v_hour" class="col" value="*" readonly="readonly" />
            </td>
            <td>
                <input type="text" name="v_day" class="col" value="*" readonly="readonly" />
            </td>
            <td>
                <input type="text" name="v_mouth" class="col" value="*" readonly="readonly" />
            </td>
            <td>
                <input type="text" name="v_week" class="col" value="?" readonly="readonly" />
            </td>
            <td style="display: none;">
                <input type="text" name="v_year" class="col" readonly="readonly" />
            </td>
        </tr>
        <tr style="display: none;">
            <!--不显示 单必须保留 方便解析表达式 -->
            <td class="help-inline" style="font-size: 14px;" >Cron 表达式:</td>
            <td colspan="6"><input type="text" name="cron" style="width: 100%;" value="* * * * * ?" id="cron"
                    /></td>
            <!--<td><input type="button" value="反解析到UI " id="btnFan" onclick="btnFan()"/></td>-->
        </tr>
        </tbody>
    </table>
</div>
</form>
</div>


<div class="form-actions modal-footer" style="text-align: center;">
    <button class="btn-success"  {{action "validate"}}>确定</button>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <button  class="btn-info" data-dismiss="modal" >取消</button>
</div>
</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</div>

<div class="box-content">
    <table class="table table-striped table-bordered bootstrap-datatable datatable table-hover table-condensed">
        <thead>
        <tr>
            <th style="text-align: center">计划名
            </th>
            <th style="text-align: center">规则
            </th>
            <th style="text-align: center">时长
            </th>
            {{#if planOperateRule}}
            <th style="width:15%;text-align:center;">操作
            </th>
                {{/if}}
        </tr>
        </thead>
        <tbody>

        {{#each paginatedContent}}
            <tr>
                <td style="text-align: center;vertical-align: middle;">
                    {{name}}
                </td>
                <!--<td style="text-align: center">{{ipc_name}}</td>-->
                <td style="text-align: center;vertical-align: middle;">
                    <a href="#" data-toggle="tooltip"  {{bind-attr title=timeCron}}>{{timeCron}}</a>
                </td>
                <td style="text-align: center;vertical-align: middle;">{{timeLength}}</td>
                {{#if controller.planOperateRule}}
                <td style="text-align: center;vertical-align: middle;">
                    <!--<a class="btn btn-success" href="#" data-toggle="tooltip" title="查看">-->
                    <!--<i class="icon-zoom-in icon-white"></i>-->
                    <!--View-->
                    <!--</a>-->
                    <a class="btn btn-info" href="#" data-toggle="tooltip" title="编辑" {{action "beforeAddOrEdit" this}}>
                        <i class="icon-edit icon-white"></i>
                        <!--Edit-->
                    </a>
                    <a class="btn btn-success" href="#" data-toggle="tooltip" title="指定摄像头" {{action "beforePointIpc" this}}>
                        <i class="icon-plus icon-white"></i>
                        <!--Edit-->
                    </a>

                    <!--<a class="btn btn-danger" data-toggle="tooltip" title="删除" {{action "deletePlanTask" this }}>-->
                    <!--<i class="icon-trash icon-white"></i>-->
                    <!--&lt;!&ndash;Delete&ndash;&gt;-->
                    <!--</a>-->
                    {{delete-confirm title=name action="deletePlanTask" param=this}}

                </td>
                 {{/if}}
            </tr>
        {{/each}}

        </tbody>
    </table>
    <!--分页控件-->
    {{page-number totalPages=totalPages count=count page=page currentTotalCounts=currentTotalCounts perPage=perPage selectPage="selectPage" loadMore="loadMore"}}


</div>


<!--    指定IPC     -->


<div class="modal hide" id="addOrRemove" style="top:20%;width:600px;" data-backdrop='static'>
    <div class="modal-header">
        <a href="#" class="close" data-dismiss="modal">×</a>
        <h4>为策略指定IPC——{{assignPlan}}</h4>
    </div>


    <div class="modal-body">

        <div class="span5">
            <label for="notAdd">可添加IPC：</label>
            <select id="notAdd" multiple="multiple" style="height: 300px;">
                {{#each ipc in outPlanList}}
                    <option>{{ipc.name}}</option>
                {{/each}}
            </select>
        </div>
        <div class="span2" style="margin-left: 0px;">
            <br><br>
            <br><br>
            <a class="btn  btn-mini" href="#" style="width: 80px;" {{action 'add'}} id="addeach" disabled="true">
                <!--<i class="icon-plus icon-white"></i>-->
                Add >
            </a>
            <br>
            <br>
            <a class="btn  btn-mini" href="#" style="width: 80px;" {{action 'remove'}} id="removeeach" disabled="true">
                <!--disabled="true"-->
                <!--<i class="icon-remove icon-white"></i>-->
                Remove <
            </a>
            <br><br>
            <br>
            <a class="btn  btn-mini" href="#" style="width: 80px;" {{action 'addAll'}} id="addall" disabled="true">
                <!--<i class="icon-plus icon-white"></i>-->
                Add All >>
            </a>
            <br>
            <br>
            <a class="btn  btn-mini" href="#" style="width: 80px;" {{action 'removeAll'}} id="removeall" disabled="true">
                <!--<i class="icon-remove icon-white"></i>-->
                Remove All <<
            </a>
        </div>

        <div class="span5">
            <label for="added">已添加IPC：</label>
            <select id="added" multiple="multiple" style="height: 300px;">
                {{#each ipc in inPlanList}}
                    <option>{{ipc.name}}</option>
                {{/each}}
            </select>
        </div>

    </div>

    <div class="form-actions modal-footer" style="text-align: center;">
        <button  class="btn-success" data-dismiss="modal" {{action 'pointIpc'}}>确定</button>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <button  class="btn-info" data-dismiss="modal">取消</button>

    </div>
</div>
</div>
</div>
</div>